<Window x:Class="gbchef.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:gbchef"
        xmlns:uc="clr-namespace:gbchef.Controls"
        mc:Ignorable="d"
        Title="Grand Bazaar Chef" Height="720" Width="1280" Initialized="Window_Initialized">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" Height="195">
            <StackPanel Orientation="Horizontal">
                <uc:SelectableListBox x:Name="Vegetables" Items="{Binding Vegetables}" />
                <uc:SelectableListBox x:Name="Fruits" Items="{Binding Fruits}" />
                <uc:SelectableListBox x:Name="Products" Items="{Binding Products}" />
                <uc:SelectableListBox x:Name="Forageables" Items="{Binding Forageables}" />
                <uc:SelectableListBox x:Name="Fish" Items="{Binding Fish}" />
                <uc:SelectableListBox x:Name="Others" Items="{Binding Others}" />
                <uc:SelectableListBox x:Name="Recipes" Items="{Binding Recipes}" />
                <uc:FilterListBox x:Name="Effects" Items="{Binding Effects}" SelectedItems="{Binding SelectedEffects, Mode=TwoWay}" />
                <uc:FilterListBox x:Name="Festivals" Items="{Binding Festivals}" SelectedItems="{Binding SelectedFestivals, Mode=TwoWay}" />
                <uc:FilterListBox x:Name="Unlocks" Items="{Binding Unlocks}" SelectedItems="{Binding SelectedUnlocks, Mode=TwoWay}" />
            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="1" Orientation="Horizontal"
            VerticalAlignment="Center">
            <CheckBox Content="Show Partially Satisfied Recipes"
                 x:Name="ShowPartial" 
                 Margin="10 0 0 0"
                 Click="ShowPartial_Click" IsChecked="True" />
            <CheckBox Content="Show All"
                 x:Name="ShowAll" 
                 Margin="10 0 0 0"
                 Click="ShowAll_Click" />
            <CheckBox Content="Include Related Recipes"
                 x:Name="IncludeRelatedRecipesCheckBox"
                 ToolTip="Also include recipes that use any of the found recipes as their ingredients." 
                 Margin="10 0 0 0"
                 Click="IncludeRelatedRecipesCheckBox_Click" IsChecked="True"/>
        </StackPanel>

        <DataGrid Grid.Row="2"
            x:Name="resultsDataGrid" 
            AutoGenerateColumns="False" 
            ItemsSource="{Binding ViewSource.View}"
            CanUserAddRows="False"
            CanUserDeleteRows="False" 
            IsReadOnly="True"
            HorizontalGridLinesBrush="#FFE6E6E6" 
            VerticalGridLinesBrush="#FFE6E6E6"
            FontSize="14"
            FontFamily="Segoe UI">



            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Style.Triggers>

                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSatisfied}" Value="False"/>
                                <Condition Binding="{Binding IsPartiallySatisfied}" Value="True"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Background" Value="#FFE5FFB7"/>
                        </MultiDataTrigger>

                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSatisfied}" Value="True"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Background" Value="#FF78CE53"/>
                        </MultiDataTrigger>

                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSatisfied}" Value="False"/>
                                <Condition Binding="{Binding IsPartiallySatisfied}" Value="False"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Background" Value="LightGray"/>
                        </MultiDataTrigger>

                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>




            <DataGrid.Columns>
                <DataGridTemplateColumn Header="">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Image MinWidth="54" 
                                   MinHeight="54"
                                   MaxHeight="100"
                                   MaxWidth="100"
                                   Source="{Binding Image}"
                                   Stretch="Uniform"
                                   VerticalAlignment="Stretch"
                                   HorizontalAlignment="Stretch"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTextColumn Header="Name" Width="180" FontSize="15" Binding="{Binding Name}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Type" Width="60" Binding="{Binding Type}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Effect" Width="80" Binding="{Binding Effect}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>


                <DataGridTextColumn Header="Price" Width="50" FontSize="15" Binding="{Binding BaseValue}">
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                            <Setter Property="TextAlignment" Value="Right"/>
                            <Setter Property="Margin" Value="0,0,5,0"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>


                <DataGridTextColumn Header="Ingredient 1" Width="130" Binding="{Binding Ingredient1}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Is1Filled}" Value="False">
                                    <Setter Property="Foreground" Value="#FFCC0000"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>

                </DataGridTextColumn>

                <DataGridTextColumn Header="Ingredient 2" Width="130" Binding="{Binding Ingredient2}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Is2Filled}" Value="False">
                                    <Setter Property="Foreground" Value="#FFCC0000"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Ingredient 3" Width="130" Binding="{Binding Ingredient3}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Is3Filled}" Value="False">
                                    <Setter Property="Foreground" Value="#FFCC0000"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Ingredient 4" Width="130" Binding="{Binding Ingredient4}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.CellStyle>
                        <Style TargetType="DataGridCell">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Is4Filled}" Value="False">
                                    <Setter Property="Foreground" Value="#FFCC0000"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.CellStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Festival" Width="80" Binding="{Binding Festival}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="How to Unlock" Width="150" Binding="{Binding Unlock}">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextWrapping" Value="Wrap"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="3" Orientation="Horizontal"
             VerticalAlignment="Center">

            <Label Content="{Binding ElementName=resultsDataGrid, Path=Items.Count}" Width="45" HorizontalAlignment="Left" RenderTransformOrigin="1.176,0.61" Margin="10 0 0 0"/>
            <Label Content="Recipes Found" Width="89" HorizontalAlignment="Left"/>
        </StackPanel>

    </Grid>
</Window>